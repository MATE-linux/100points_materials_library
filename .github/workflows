name: Release Notification
on:
  release:
    types: [published]

jobs:
  notify-on-release:
    runs-on: ubuntu-latest
    steps:
      - name: Send Telegram Notification
        uses: cbrgm/telegram-github-action@v1
        with:
          token: ${{ secrets.TELEGRAM_TOKEN }}
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          parse-mode: markdown
          message: |
            *[`${{ github.event.head_commit.timestamp }}`] Обновление базы данных конспектов*
            *Репозиторий:* ${{ github.repository }}
            *Релиз:* ${{ github.event.release.name }}
            *Сообщение коммита:* _${{ github.event.head_commit.message }}_
            *Тэг:* ${{ github.event.release.tag_name }}
            *Автор:* ${{ github.actor }}
            *Смотреть:* ${{ github.event.release.html_url }}
          disable-notification: true
